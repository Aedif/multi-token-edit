<form>
    <!-- Macro List -->
    <datalist id="toRunMacro">
        {{#each macros}}
        <option value="{{this}}">
        {{/each}}
    </datalist>  

    <div class="form-group">
        <label>Macro Name</label>
        <input name="name" type="text" value="{{docName}} Update Macro"></input>
    </div>
    <br>
    <h3>Targeting</h3>
    <div class="form-group">
        <label>Target</label>
        <select name="target" data-dtype="string">
            {{#each targetingOptions}}
            <option value="{{this.value}}" title="{{this.title}}">{{this.label}}</option>
            {{/each}}
        </select>
    </div>
    <div class="taggerControl" hidden>
        <div class="form-group">
            <label>Tags</label>
            <input name="tags" type="text" value=""></input>
        </div>
        <div class="form-group">
            <label>Must match</label>
            <select name="taggerMatch" data-dtype="string">
                <option value="any" selected="selected">Any Tag</option>
                <option value="all">All Tags</option>
            </select>
        </div>
    </div>
    <br>
    <h3>Application Method</h3>
    <div class="form-group">
        <label>Method</label>
        <select name="method" data-dtype="string">
            <option value="update" selected="selected">Update</option>
            <option value="toggle">Toggle</option>
        </select>
    </div>
    <div class="toggleControl" hidden>
        <div class="form-group">
            <label>Toggle Detection</label>
            <select name="toggleMethod" data-dtype="string">
                <option value="fieldCompare" selected="selected">Field Compare</option>
                <option value="flag">Flag</option>
            </select>
        </div>
        <br>
    </div>
    {{#if hiddenControl}}
    <div class="form-group">
        <div style="text-align: right;">
            <a><img class="toggleVisibility" src="icons/svg/cowled.svg" width="25" height="25" title="Toggle Visibility State"></a>
        </div>
    </div>
    {{/if}}
    <div class="toggleControl" hidden><label><b>Toggle ON</b></label></div>
    <div>
        {{#if hasRandom}}
        <a class="random" title="Randomized Fields"><i class="fas fa-dice"></i></a>
        <input name="random" type="text" value="{{random}}" hidden>
        {{/if}}

        {{#if hasAddSubtract}}
        <a class="addSubtract" title="Add/Subtract Fields"><i class="fas fa-calculator-alt"></i></a>
        <input name="addSubtract" type="text" value="{{addSubtract}}" hidden>
        {{/if}}
    </div>
    <textarea name="fields" style="width:100%; height: 200px;">{{fields}}</textarea>
    <div class="form-group slim">
        <label>Run</label>
        <div class="form-fields">
            <label>Macro</label>
            <input list="toRunMacro" name="runMacro">
            {{#if selectable}}
            <label>Select Targets</label>
            <input type="checkbox" name="selectTargets" />
            {{/if}}
        </div>
    </div>
    <div class="toggleControl" hidden>
        <label><b>Toggle OFF</b></label>
        <div>
            {{#if hasRandom}}
            <a class="toggleRandom" title="Randomized Fields"><i class="fas fa-dice"></i></a>
            <input name="toggleRandom" type="text" value="{{random}}" hidden>
            {{/if}}
            {{#if hasAddSubtract}}
            <a class="toggleAddSubtract" title="Add/Subtract Fields"><i class="fas fa-calculator-alt"></i></a>
            <input name="toggleAddSubtract" type="text" value="{{addSubtract}}" hidden>
            {{/if}}
        </div>
        <textarea name="toggleFields" style="width:100%; height: 200px;"></textarea>
        <div class="form-group slim">
            <label>Run</label>
            <div class="form-fields">
                <label>Macro</label>
                <input list="toRunMacro" name="runMacroToggle">
                {{#if selectable}}
                <label>Select Targets</label>
                <input type="checkbox" name="selectTargetsToggle" />
                {{/if}}
            </div>
        </div>
    </div>

    {{#if hasMEControls}}
    <div class="form-group" style="outline-style: dotted; color: orangered;">
        <label>Note: Including addition, subtraction, randomization, or special fields such TMFX Presets and DDTint will result in the macro having a dependency on Mass Edit.</label>
    </div>
    {{/if}}

    <footer class="sheet-footer flexrow">
        <button type="submit">Generate Macro</button>
    </footer>
</form>